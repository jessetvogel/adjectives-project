# The Adjectives Project

## Introduction



## Architecture

All user data is stored in .yaml files (for readability and ease-of-use) in the /data folder.
All processed data is stored in .json files (for ease-of-use with JavaScript).
Note that the browser not need parse .yaml files, only .json files, which it can do very well.
Note that the distinction between user data and processed data is very clear.
The admin modifies only the .yaml data in the /data folder.

The .yaml data consists of one file per type / theorem / adjective / example.

Among the processed .json data is a summary.json file.
The summary.json file contains a virtual tree of the files in the json directory.
However, the summary.json file does not contain descriptions nor justifications.
The summary.json file is loaded by the client to search for examples and perform deductions.
Note that we do not want descriptions and justifications in summary.json because we do not want the client to load massive amounts of text.
The summary.json file is updated whenever new deductions are made.

The full data of each type / adjective / theorem / example are stored in the /json folder as follows:
- Every type has a file under `/json/types/<id>.json`
- Every adjective has a file under `/json/adjectives/<type>/<id>.json`
- Every theorem has a file under `/json/theorems/<type>/<id>.json`
- Every example has a file under `/json/examples/<type>/<id>.json`

The proofs of adjective values for examplse are also stored in the .json files (of the corresponding example).
These proofs are strings when they are provided by humans.
These proofs are formatted as `ðŸ¤– <type> <theorem> <id>` when they are generated by the assistant.
This format means that the adjective value was deduced by applying theorem `<theorem>` of type `<type>` to the object with id `<id>` of type `<type>`.
This way, the client can recursively deduce the complete proof if they wish to do so.

There are a number of scripts:
- `script-update-json-from-yaml.js`: reads the .yaml files and updates summary.json and the other .json files accordingly with any new information that is provided. Note that it overwrites (but not erases) existing data.
- `script-deduce.js`: tries to make as many new deductions as possible for the examples (based on the summary.json file), and updates summary.json and the relevant .json files accoringly.
- `script-clear-json.js`: clears all generated .json files.
- `script-generate-questions.js`: generates questions (of the form 'Does there exist a (type) satisfying these conditions?') for which there does not yet exist an example, and which cannot be disproven using the theorems.

## YAML files

The `id` of every type, adjective, theorem or example is given by the filename. For instance, `Spec-ZZ.yaml` is given the id `Spec-ZZ`.

```yaml
# yaml file for types
type: type
name: morphism                   # optional: id by default
parameters:                      # optional
  source: scheme
  target: scheme
description: A morphism is [...] # optional
```

```yaml
# yaml file for adjectives
type: scheme adjective                   # '<type> adjective'
name: affine                             # optional: id by default
description: A scheme is affine if [...] # optional
```

```yaml
# yaml file for examples
type: scheme
name: $\Spec \ZZ$                               # optional: id by default
description: The spectrum of the integers       # optional
adjectives:                                     # optional
  affine: true                                  # either true/false ...
  integral: [true, The ring $\ZZ$ is a domain.] # ... or [true/false, <proof>]
```

```yaml
# yaml file for theorems
type: theorem
name: morphisms with affine source and target are affine # optional: id by default
given: morphism f                                        # <type> <placeholder>
if: [f.source affine, f.target affine]                   # <object> [not] <adjective>
then: f affine                                           # <object> [not] <adjective>
```

## Client

- `index.html`: single page application, with tabs:
  - Explore: allows for dynamic searching, deductions, contradictions, etc.
  - Overview: lists all objects, with id, name, type, and description if it fits
              with some filters
  - Contribute: some way to contribute (pull request to GitHub seems good)
  Furthermore:
  - Example page: display name, arguments, description, and a table of properties with their status and proofs
  - Adjective page: display name, type, description (and possibly button to show which are and which are not)
  - Theorem page: display name, type, description. Auto-generate the theorem statement in human-readable format.
    - Show list of counterexamples for the converse statement
  - Type page: display name, parameters

- `admin.html`: admin panel, where the admin can edit the yaml files, and execute a number of scripts

## TODO

- Make separate repository of /data and add it as a git submodule
- Make README.md
- Create help page
- Create contribute page
- Copy data from old project
- Check for redundant theorems
